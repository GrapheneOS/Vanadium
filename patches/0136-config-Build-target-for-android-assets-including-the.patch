From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: fgei <fgei@gmail.com>
Date: Sat, 2 Dec 2023 06:58:23 +0000
Subject: [PATCH] config: Build target for android assets including the content
 filtering file

---
 vanadium/android_config/filter_lists/BUILD.gn | 45 +++++++++++++++++++
 1 file changed, 45 insertions(+)
 create mode 100644 vanadium/android_config/filter_lists/BUILD.gn

diff --git a/vanadium/android_config/filter_lists/BUILD.gn b/vanadium/android_config/filter_lists/BUILD.gn
new file mode 100644
index 0000000000000..8803e4a894681
--- /dev/null
+++ b/vanadium/android_config/filter_lists/BUILD.gn
@@ -0,0 +1,45 @@
+# Copyright 2023 The Chromium Authors
+# Use of this source code is governed by a BSD-style license that can be
+# found in the LICENSE file.
+
+import("//build/compiled_action.gni")
+import("//build/config/android/rules.gni")
+
+assert(is_android)
+
+compiled_action("generate_ruleset") {
+  tool = "//components/subresource_filter/tools:ruleset_converter"
+
+  outputs = [
+    "$root_out_dir/unindexed_ruleset",
+  ]
+
+  inputs = [
+    "//vanadium/android_config/filter_lists/filter_lists.txt",
+  ]
+
+  deps = [
+    "//components/subresource_filter/tools:ruleset_converter",
+  ]
+
+  args = [
+    "--input_format=filter-list",
+    "--output_format=unindexed-ruleset",
+    "--input_files=" + rebase_path(inputs[0], root_build_dir),
+    "--output_file=" + rebase_path(outputs[0], root_build_dir),
+  ]
+}
+
+
+android_assets("ruleset_assets") {
+  disable_compression = true
+  renaming_sources = [
+    "$root_out_dir/unindexed_ruleset",
+  ]
+  renaming_destinations = [
+    "../unindexed_ruleset",
+  ]
+  deps = [
+    ":generate_ruleset",
+  ]
+}
\ No newline at end of file
