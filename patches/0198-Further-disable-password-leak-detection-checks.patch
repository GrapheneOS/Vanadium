From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: quh4gko8 <88831734+quh4gko8@users.noreply.github.com>
Date: Tue, 13 May 2025 14:00:49 +0000
Subject: [PATCH] Further disable password leak detection checks

---
 .../core/browser/leak_detection/leak_detection_check_impl.cc  | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/components/password_manager/core/browser/leak_detection/leak_detection_check_impl.cc b/components/password_manager/core/browser/leak_detection/leak_detection_check_impl.cc
index 894bdc7682cd1..a6844b2e558b8 100644
--- a/components/password_manager/core/browser/leak_detection/leak_detection_check_impl.cc
+++ b/components/password_manager/core/browser/leak_detection/leak_detection_check_impl.cc
@@ -227,6 +227,7 @@ bool LeakDetectionCheck::CanStartLeakCheck(
     const PrefService& prefs,
     const GURL& form_url,
     std::unique_ptr<autofill::SavePasswordProgressLogger> logger) {
+#if defined(PASSWORD_LEAK_DETECTION_ENABLED)
   const bool is_leak_protection_on =
       prefs.GetBoolean(prefs::kPasswordLeakDetectionEnabled);
   if (!is_leak_protection_on && logger) {
@@ -235,6 +236,9 @@ bool LeakDetectionCheck::CanStartLeakCheck(
   }
   return is_leak_protection_on && !LeakDetectionCheck::IsURLBlockedByPolicy(
                                       prefs, form_url, logger.get());
+#else
+  return false;
+#endif
 }
 
 void LeakDetectionCheckImpl::OnAccessTokenRequestCompleted(
