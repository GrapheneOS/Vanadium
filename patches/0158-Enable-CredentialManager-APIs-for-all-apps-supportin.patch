From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: fgei <fgei@gmail.com>
Date: Fri, 29 Mar 2024 13:26:23 +0000
Subject: [PATCH] Enable CredentialManager APIs for all apps supporting
 passkeys

---
 device/fido/features.cc | 2 +-
 device/fido/features.h  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/device/fido/features.cc b/device/fido/features.cc
index 5145687da76c6..533506970dc28 100644
--- a/device/fido/features.cc
+++ b/device/fido/features.cc
@@ -48,7 +48,7 @@ BASE_FEATURE(kWebAuthnGoogleCorpRemoteDesktopClientPrivilege,
 // Added in M114. Not yet enabled by default.
 BASE_FEATURE(kWebAuthnAndroidCredMan,
              "WebAuthenticationAndroidCredMan",
-             base::FEATURE_DISABLED_BY_DEFAULT);
+             base::FEATURE_ENABLED_BY_DEFAULT);
 #endif  // BUILDFLAG(IS_ANDROID)
 
 // Added in M115. Remove in or after M118
diff --git a/device/fido/features.h b/device/fido/features.h
index 08ca19bc05472..1a1a259fd8831 100644
--- a/device/fido/features.h
+++ b/device/fido/features.h
@@ -36,7 +36,7 @@ BASE_DECLARE_FEATURE(kWebAuthnAndroidCredMan);
 // Use the Android 14 Credential Manager API for credentials stored in Gmscore.
 COMPONENT_EXPORT(DEVICE_FIDO)
 inline constexpr base::FeatureParam<bool> kWebAuthnAndroidGpmInCredMan{
-    &kWebAuthnAndroidCredMan, "gpm_in_cred_man", false};
+    &kWebAuthnAndroidCredMan, "gpm_in_cred_man", true};
 #endif  // BUILDFLAG(IS_ANDROID)
 
 // Advertise hybrid prelinking on Android even if the app doesn't have
