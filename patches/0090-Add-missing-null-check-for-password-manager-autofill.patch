From bc63729e63c53ba831e3bf1ea7e7431a1f1b14f4 Mon Sep 17 00:00:00 2001
From: fgei <fgei@gmail.com>
Date: Mon, 20 Feb 2023 07:06:53 +0000
Subject: [PATCH] Add missing null check for password manager autofill

---
 .../autofill/content/renderer/password_autofill_agent.cc     | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/components/autofill/content/renderer/password_autofill_agent.cc b/components/autofill/content/renderer/password_autofill_agent.cc
index f455b14ae688f..caf8c9a71ee8d 100644
--- a/components/autofill/content/renderer/password_autofill_agent.cc
+++ b/components/autofill/content/renderer/password_autofill_agent.cc
@@ -804,7 +804,10 @@ void PasswordAutofillAgent::UpdateStateForTextChange(
 
 void PasswordAutofillAgent::TrackAutofilledElement(
     const blink::WebFormControlElement& element) {
-  autofill_agent_->TrackAutofilledElement(element);
+  AutofillAgent* agent = autofill_agent_.get();
+  if (agent) {
+    agent->TrackAutofilledElement(element);
+  }
 }
 
 bool PasswordAutofillAgent::FillSuggestion(
