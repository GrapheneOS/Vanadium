From 7fa1dfbf6f67be39a9ba3d7e908c3d359aa7bc88 Mon Sep 17 00:00:00 2001
From: fgei <fgei@gmail.com>
Date: Mon, 20 Feb 2023 07:06:53 +0000
Subject: [PATCH] Add missing null check for password manager autofill

---
 .../autofill/content/renderer/password_autofill_agent.cc     | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/components/autofill/content/renderer/password_autofill_agent.cc b/components/autofill/content/renderer/password_autofill_agent.cc
index 9059de25cca78..17c54ee3590a3 100644
--- a/components/autofill/content/renderer/password_autofill_agent.cc
+++ b/components/autofill/content/renderer/password_autofill_agent.cc
@@ -804,7 +804,10 @@ void PasswordAutofillAgent::UpdateStateForTextChange(
 
 void PasswordAutofillAgent::TrackAutofilledElement(
     const blink::WebFormControlElement& element) {
-  autofill_agent_->TrackAutofilledElement(element);
+  AutofillAgent* agent = autofill_agent_.get();
+  if (agent) {
+    agent->TrackAutofilledElement(element);
+  }
 }
 
 bool PasswordAutofillAgent::FillSuggestion(
