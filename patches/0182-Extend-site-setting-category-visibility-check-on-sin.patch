From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: quh4gko8 <88831734+quh4gko8@users.noreply.github.com>
Date: Thu, 30 Jan 2025 14:11:07 +0000
Subject: [PATCH] Extend site setting category visibility check on single
 website settings

---
 .../browser_ui/site_settings/SingleWebsiteSettings.java    | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/components/browser_ui/site_settings/android/java/src/org/chromium/components/browser_ui/site_settings/SingleWebsiteSettings.java b/components/browser_ui/site_settings/android/java/src/org/chromium/components/browser_ui/site_settings/SingleWebsiteSettings.java
index 7ad0a343b1d09..d20a0d3134b32 100644
--- a/components/browser_ui/site_settings/android/java/src/org/chromium/components/browser_ui/site_settings/SingleWebsiteSettings.java
+++ b/components/browser_ui/site_settings/android/java/src/org/chromium/components/browser_ui/site_settings/SingleWebsiteSettings.java
@@ -1326,6 +1326,13 @@ public class SingleWebsiteSettings extends BaseSiteSettingsFragment
             Preference preference, @ContentSetting @Nullable Integer value) {
         @ContentSettingsType.EnumType
         int contentType = getContentSettingsTypeFromPreferenceKey(preference.getKey());
+        SiteSettingsCategory siteSettingsCategory =
+                SiteSettingsCategory.createFromContentSettingsType(
+                        getBrowserContextHandle(), contentType);
+        if (!getSiteSettingsDelegate().isCategoryVisible(siteSettingsCategory.getType())) {
+            return;
+        }
+
         int titleResourceId = ContentSettingsResources.getTitle(contentType);
 
         if (contentType == ContentSettingsType.JAVASCRIPT_OPTIMIZER) {
